<svg viewBox="0 0 900 700" xmlns="http://www.w3.org/2000/svg">
  <!-- Background gradient -->
  <defs>
    <linearGradient id="bg-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f8f9fa;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e9ecef;stop-opacity:1" />
    </linearGradient>

    <!-- Component styles -->
    <filter id="shadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="3" dy="3" stdDeviation="3" flood-opacity="0.3" />
    </filter>

    <!-- Arrow markers -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#6c757d" />
    </marker>
    <marker id="redArrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#dc3545" />
    </marker>
    <marker id="greenArrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#28a745" />
    </marker>
  </defs>

  <!-- Main background -->
  <rect width="900" height="700" fill="url(#bg-gradient)" rx="10" ry="10" />

  <!-- Title -->
  <text x="450" y="40" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle" fill="#212529">Customer Support Evaluation System Architecture</text>

  <!-- Configuration Section -->
  <rect x="50" y="80" width="180" height="160" rx="10" ry="10" fill="#e3f2fd" stroke="#0d6efd" stroke-width="2" filter="url(#shadow)" />
  <text x="140" y="105" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#0d6efd">Configuration</text>

  <rect x="70" y="120" width="140" height="40" rx="5" ry="5" fill="#ffffff" stroke="#0d6efd" stroke-width="1" />
  <text x="140" y="145" font-family="Arial" font-size="12" text-anchor="middle">settings.yaml</text>

  <rect x="70" y="180" width="140" height="40" rx="5" ry="5" fill="#ffffff" stroke="#0d6efd" stroke-width="1" />
  <text x="140" y="205" font-family="Arial" font-size="12" text-anchor="middle">config.json</text>

  <!-- UI Section -->
  <rect x="50" y="500" width="180" height="120" rx="10" ry="10" fill="#f0fdf4" stroke="#16a34a" stroke-width="2" filter="url(#shadow)" />
  <text x="140" y="525" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#16a34a">User Interface</text>

  <rect x="70" y="540" width="140" height="60" rx="5" ry="5" fill="#ffffff" stroke="#16a34a" stroke-width="1" />
  <text x="140" y="565" font-family="Arial" font-size="12" text-anchor="middle">Streamlit UI</text>
  <text x="140" y="585" font-family="Arial" font-size="10" text-anchor="middle" fill="#6c757d">(src/ui/app.py)</text>

  <!-- Models Section -->
  <rect x="300" y="80" width="180" height="100" rx="10" ry="10" fill="#fff3cd" stroke="#ffc107" stroke-width="2" filter="url(#shadow)" />
  <text x="390" y="105" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#856404">Data Models</text>

  <rect x="320" y="120" width="140" height="40" rx="5" ry="5" fill="#ffffff" stroke="#ffc107" stroke-width="1" />
  <text x="390" y="145" font-family="Arial" font-size="12" text-anchor="middle">TicketState</text>

  <!-- LLM Integration -->
  <rect x="300" y="550" width="180" height="100" rx="10" ry="10" fill="#f8d7da" stroke="#dc3545" stroke-width="2" filter="url(#shadow)" />
  <text x="390" y="575" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#721c24">LLM Integration</text>

  <rect x="320" y="590" width="140" height="40" rx="5" ry="5" fill="#ffffff" stroke="#dc3545" stroke-width="1" />
  <text x="390" y="615" font-family="Arial" font-size="12" text-anchor="middle">ChatOpenAI</text>

  <!-- Workflow Section -->
  <rect x="550" y="300" width="300" height="280" rx="10" ry="10" fill="#f1f8ff" stroke="#4dabf7" stroke-width="2" filter="url(#shadow)" />
  <text x="700" y="325" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#2b8a3e">Evaluation Workflow</text>
  <text x="700" y="345" font-family="Arial" font-size="12" text-anchor="middle" fill="#6c757d">(LangGraph)</text>

  <!-- Workflow Components -->
  <circle cx="620" cy="390" r="40" fill="#ffffff" stroke="#4dabf7" stroke-width="1.5" />
  <text x="620" y="390" font-family="Arial" font-size="11" text-anchor="middle">Evaluate</text>
  <text x="620" y="405" font-family="Arial" font-size="11" text-anchor="middle">Clarity</text>

  <circle cx="700" cy="450" r="40" fill="#ffffff" stroke="#4dabf7" stroke-width="1.5" />
  <text x="700" y="450" font-family="Arial" font-size="11" text-anchor="middle">Assess</text>
  <text x="700" y="465" font-family="Arial" font-size="11" text-anchor="middle">Politeness</text>

  <circle cx="780" cy="390" r="40" fill="#ffffff" stroke="#4dabf7" stroke-width="1.5" />
  <text x="780" y="390" font-family="Arial" font-size="11" text-anchor="middle">Examine</text>
  <text x="780" y="405" font-family="Arial" font-size="11" text-anchor="middle">Professionalism</text>

  <circle cx="700" cy="510" r="40" fill="#ffffff" stroke="#4dabf7" stroke-width="1.5" />
  <text x="700" y="510" font-family="Arial" font-size="11" text-anchor="middle">Verify</text>
  <text x="700" y="525" font-family="Arial" font-size="11" text-anchor="middle">Resolution</text>

  <circle cx="700" cy="390" r="35" fill="#ffffff" stroke="#28a745" stroke-width="1.5" />
  <text x="700" y="385" font-family="Arial" font-size="11" text-anchor="middle">Compute</text>
  <text x="700" y="400" font-family="Arial" font-size="11" text-anchor="middle">Effectiveness</text>

  <!-- Main Processing Component -->
  <rect x="300" y="300" width="180" height="160" rx="10" ry="10" fill="#d1e7dd" stroke="#198754" stroke-width="2" filter="url(#shadow)" />
  <text x="390" y="325" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#0f5132">Core Processing</text>

  <rect x="320" y="340" width="140" height="40" rx="5" ry="5" fill="#ffffff" stroke="#198754" stroke-width="1" />
  <text x="390" y="365" font-family="Arial" font-size="12" text-anchor="middle">Evaluation Functions</text>

  <rect x="320" y="400" width="140" height="40" rx="5" ry="5" fill="#ffffff" stroke="#198754" stroke-width="1" />
  <text x="390" y="425" font-family="Arial" font-size="12" text-anchor="middle">Feedback Generation</text>

  <!-- Utility Section -->
  <rect x="50" y="300" width="180" height="120" rx="10" ry="10" fill="#e2e3e5" stroke="#6c757d" stroke-width="2" filter="url(#shadow)" />
  <text x="140" y="325" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#383d41">Utilities</text>

  <rect x="70" y="340" width="140" height="60" rx="5" ry="5" fill="#ffffff" stroke="#6c757d" stroke-width="1" />
  <text x="140" y="365" font-family="Arial" font-size="12" text-anchor="middle">Helper Functions</text>
  <text x="140" y="385" font-family="Arial" font-size="10" text-anchor="middle" fill="#6c757d">(src/utils/helpers.py)</text>

  <!-- Entry Point -->
  <polygon points="640,130 670,150 640,170 610,150" fill="#212529" stroke="#0d6efd" stroke-width="2" filter="url(#shadow)" />
  <text x="640" y="155" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle" fill="#ffffff">main.py</text>

  <!-- Connection Arrows -->
  <!-- Config to Models -->
  <path d="M230,140 C270,140 270,130 300,130" fill="none" stroke="#6c757d" stroke-width="2" marker-end="url(#arrowhead)" />

  <!-- Config to Utilities -->
  <path d="M140,240 C140,270 140,300 140,300" fill="none" stroke="#6c757d" stroke-width="2" marker-end="url(#arrowhead)" />

  <!-- Models to Core Processing -->
  <path d="M390,180 C390,240 390,300 390,300" fill="none" stroke="#6c757d" stroke-width="2" marker-end="url(#arrowhead)" />

  <!-- Utilities to Core Processing -->
  <path d="M230,360 C265,360 265,380 300,380" fill="none" stroke="#6c757d" stroke-width="2" marker-end="url(#arrowhead)" />

  <!-- Core Processing to Workflow -->
  <path d="M480,380 C515,380 515,390 550,390" fill="none" stroke="#6c757d" stroke-width="2" marker-end="url(#arrowhead)" />

  <!-- Workflow internal arrows -->
  <path d="M645,365 C675,355 695,350 700,355 C705,360 695,380 690,405" fill="none" stroke="#28a745" stroke-width="1.5" marker-end="url(#greenArrowhead)" />
  <path d="M733,405 C741,431 760,446 780,430 C785,425 782,410 780,390" fill="none" stroke="#28a745" stroke-width="1.5" marker-end="url(#greenArrowhead)" />
  <path d="M740,380 C745,370 748,362 749,358 C750,354 740,352 730,355 C720,358 710,370 700,375" fill="none" stroke="#28a745" stroke-width="1.5" marker-end="url(#greenArrowhead)" />
  <path d="M670,450 C665,450 660,450 655,450 C650,450 645,440 640,430 C635,420 630,410 620,390" fill="none" stroke="#28a745" stroke-width="1.5" marker-end="url(#greenArrowhead)" />
  <path d="M700,470 L700,490" fill="none" stroke="#28a745" stroke-width="1.5" marker-end="url(#greenArrowhead)" />

  <!-- Conditional paths - red -->
  <path d="M620,430 C620,500 620,520 670,520" fill="none" stroke="#dc3545" stroke-width="1.5" stroke-dasharray="5,2" marker-end="url(#redArrowhead)" />
  <path d="M660,450 C590,450 570,390 660,390" fill="none" stroke="#dc3545" stroke-width="1.5" stroke-dasharray="5,2" marker-end="url(#redArrowhead)" />
  <path d="M780,350 C780,300 735,330 700,350" fill="none" stroke="#dc3545" stroke-width="1.5" stroke-dasharray="5,2" marker-end="url(#redArrowhead)" />

  <!-- Workflow to LLM -->
  <path d="M700,550 C700,565 470,580 390,600" fill="none" stroke="#6c757d" stroke-width="2" marker-end="url(#arrowhead)" />

  <!-- Core Processing to UI -->
  <path d="M320,460 C240,480 230,500 230,540" fill="none" stroke="#6c757d" stroke-width="2" marker-end="url(#arrowhead)" />

  <!-- Entry Point arrows -->
  <path d="M640,170 C640,220 640,270 480,300" fill="none" stroke="#0d6efd" stroke-width="2" marker-end="url(#arrowhead)" />
  <path d="M610,150 C440,150 440,100 440,100 C440,100 450,95 460,90" fill="none" stroke="#0d6efd" stroke-width="2" marker-end="url(#arrowhead)" />
  <path d="M640,170 C640,450 350,500 230,520" fill="none" stroke="#0d6efd" stroke-width="2" marker-end="url(#arrowhead)" />

  <!-- Legend -->
  <rect x="650" y="600" width="200" height="80" rx="5" ry="5" fill="#ffffff" stroke="#212529" stroke-width="1" />
  <text x="750" y="620" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Legend</text>

  <line x1="670" y1="640" x2="690" y2="640" stroke="#28a745" stroke-width="1.5" marker-end="url(#greenArrowhead)" />
  <text x="750" y="645" font-family="Arial" font-size="12" text-anchor="middle">Normal Flow</text>

  <line x1="670" y1="660" x2="690" y2="660" stroke="#dc3545" stroke-width="1.5" stroke-dasharray="5,2" marker-end="url(#redArrowhead)" />
  <text x="750" y="665" font-family="Arial" font-size="12" text-anchor="middle">Conditional Path</text>
</svg>